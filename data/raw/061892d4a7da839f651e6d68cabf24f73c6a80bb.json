{"title": "State-of-the-art methods for inverse design of an enclosed environment", "body": "People spend roughly 90% of their daily lives in enclosed environments such as buildings, transportation vehicles, etc. [1] . A thermally comfortable, healthy, and productive enclosed environment is very important for occupants. Such an environment is typically achieved by controlling the air temperature, relative humidity, air speed, and chemical species concentrations in enclosed spaces with heating, ventilating, and air-conditioning (HVAC) systems. The energy used by HVAC systems accounts for over 40% of the total energy consumption in buildings in the United States [2] .\n\nIn transportation vehicles such as medium-and large-sized commercial aircrafts, the operating power of HVAC systems in a 400passenger airliner is as high as 350 kW, which is about 75% of all non-propulsive energy consumption on board [3] .\n\nEven with such high energy consumption and associated carbon dioxide emissions, the resulting enclosed environments are not satisfactory. Inside buildings, according to survey data from the International Facility Management Association [4] , the predominant complaint of office occupants is that \"it's too hot and too cold, simultaneously.\" Not only is the thermal environment poor, but the studies have also found that 20% of our buildings may suffer sick building syndrome [5] . This syndrome is frequently attributed to flaws in HVAC systems. Other possible causes related to indoor air quality are volatile organic compounds from building material outgassing, molds, and light industrial chemicals used in factories [6, 7] . During overseas flights on commercial airliners, up to half of the passengers typically experience health problems, with 5% of them requiring medical attention [8] . Respiratory diseases in particular can be transmitted in an airliner cabin [9] . For example, among the 120 passengers on a flight from Hong Kong to Beijing in 2003, 22 were infected with the severe acute respiratory syndrome (SARS) [10] , and in 2009 the H1N1-A virus spread to 76 countries on six continents within a month and a half [11] . Indoor environments, especially in buildings with high occupant density and transport vehicles, are in need of further improvements.\n\nAt the same time, requirements for indoor environments are changing with improvements in our standard of living. Our current design goal for indoor environments is to ensure that 80% of building occupants are comfortable and satisfied. This standard is far too low. In order to approach a satisfaction level of 100%, the design should provide a personalized environment that is thermally comfortable, healthy, productive, and safe for all occupants, with low energy consumption and minimal adverse environmental impact [12] .\n\nA trial-and-error process has traditionally been used to design HVAC systems for enclosed environments. A designer may have to assume an HVAC system for the environment according to his/her experience. The system's ability to produce the desired thermal comfort and indoor air quality level will then be evaluated through the distribution characteristics of air temperature, relative humidity, air velocity, and contaminant concentrations in the enclosed environment by using analytical and empirical models, computer simulations, or by means of experimental measurements [13] . By adjusting the HVAC system parameters iteratively on the basis of the evaluation results, the designer can achieve a desired enclosed environment. However, this trial-and-error process may involve a large number of iterations between the initial and final designs, highly depending on the designer's knowledge and experience. If a sophisticated performance evaluation tool is used, such as computational fluid dynamics (CFD), the design process can take days or weeks, but the resulting enclosed environment may still not meet the design objective.\n\nTo design an HVAC system for a desirable enclosed environment, the best approach is to start with the design objective (e.g., the desired thermal comfort and indoor air quality level). The inverse design method can achieve the desirable enclosed environment in a single series of evaluation that determines the necessary HVAC system. This paper provides a review on the state of the art of inverse design methods, shows some examples of their applications, and indicates possible directions for future exploration.\n\nA typical inverse problem study seeks to identify unknown causes of known consequences [14] . Fig. 1 shows a system and its input and output. The inverse problem study is either for problem reconstruction or identification. The goal of a reconstruction problem is to find the input with given system parameters and output. The goal of an identification problem is to determine system parameters with given input and output.\n\nThe inverse design of an enclosed environment is a reconstruction problem. The input could be the inlet location and size and the supply air parameters from an HVAC system, envelope temperature, the location and strength of a contaminant source, etc. The output could be the desired thermal comfort, air quality, energy efficiency, and so on. The system that connects the input and output is airflow and heat and mass transfer in the enclosed space governed by the NaviereStokes (NS) equation. The airflow and heat and mass transfer can be obtained by means of analytical and empirical models, computer simulations, or experimental measurements. Because of the limited space in this paper, we have used only the NS-equation-based methods.\n\nThe inverse design can be further divided into backward methods and forward methods. Backward methods include the quasi-reversibility method [15] , pseudo-reversibility method [16] , and regularized inverse matrix method [17] . Forward methods include the adjoint method [18] , genetic algorithm (GA) [19] , and proper orthogonal decomposition (POD) analysis [20] . In the next section, we will introduce these inverse design methods together with several examples.\n\nBackward method attempts to solve the inverse NS equation by a direct inversion such as with a negative time step in the timemarching problems. However, the simple direct solution is impossible because the actual world is not reversible. A viable solution imposes a reduction in entropy that is against the secondlaw of thermodynamics. Thus, the governing equation has to be twisted to avoid solving directly the inversed governing equation. The modified method can be the quasi-reversibility and pseudoreversibility method.\n\nThe quasi-reversibility method solves the irreversible governing equation using a stabilization technique. This method was first used to solve ill-posed partial differential equations for heat conduction problems [15] . It was also used to solve the inverse heat conduction in a quasi-boundary-value-problem variant of the original formulation [21] . Later, the method was applied to identify groundwater contaminant sources [22] . To identify a contaminant source by using the contaminant information detected by a sensor, one could inversely solve the governing species transport Equation (1) . The inversion to Eq. (1) is ill-posed because the time-forward process is dispersive and an inversion to a dispersive process is unstable. The quasi-reversibility method replaces the most unstable diffusion term with a fourth-order term, as shown in Eq. (2) [23] . Then the equation can be solved reversibly.\n\nwhere j is the species concentration, t is forward time, i.e., Dt > 0, x i is the coordinate, u i is a velocity component, G j is the diffusion coefficient, t is backward time, i.e., Dt < 0, and \u03b5 is stabilization coefficient which determines the strength of stabilized operation. The above quasi-reversibility method was demonstrated to identify a gaseous pollutant source in an aircraft cabin released at floor level from t \u00bc 0e0.04 s according to the scenario shown in Fig. 2(a) . The contaminant concentration distribution at t \u00bc 6 s provided by a forward CFD simulation, as shown in Fig. 2(b) , was used as the initial condition to conduct the inverse simulation. method becomes dispersive, the location of the contaminant source can be identified. The quasi-reversibility method was also extended to inversely locate an airborne particle source [24] . The quasireversibility method requires a known flow field as the priori, because Eq. (2) is only for the species concentration. However, if a design of an enclosed environment also requires the inverse prediction of the flow field, this method is not applicable.\n\nInstead of reversing time as in the quasi-reversibility method, the pseudo-reversibility method solves inverse contaminant transport with reversed flows. The pseudo-reversibility method also requires a known flow field as the priori. Kato et al. [16, 25, 26] used the method to assess local pollution from upwind regions with backward trajectory analysis of the flows in the atmospheric environment. The method has also been used in groundwater contaminant transport [27, 28] , where both convection and diffusion transport of contaminants is solved with flow reversion. Zhang and Chen [29] compared the pseudo-reversibility method with the quasi-reversibility method in the inverse identification of a contaminant source in an aircraft cabin. They found that both methods were dispersive, and accuracy was poor if there was significant diffusion in contaminant transport.\n\nThe regularized inverse matrix method performs an inversion to the cause-effect governing matrix A and improves the stability of the inverse operation by regularization. Suppose the release rate vector q and the concentration response vector C can be described by Eq. (3). Since the matrix is ill-posed, a regularized matrix L is added, and the strength of the regularized operation is controlled by a regularized coefficient l [17, 30] . With an appropriate l, the release rate q can be solved once a C is provided (Eq. (4)). The causeeffect matrix A is a function of the flow, source, and sensor location. More details on calculation of the matrix A with the convolution theory can be found in Refs. [31e33].\n\nwhere the superscript T in Eq. (4) represents the transpose operation. The regularized matrix L is usually taken as the second-order time derivative format [33] , which is well posed and reversible. Zhang et al. [33] applied this method to inversely quantify the temporal rate profile of a continuously released gaseous pollutant source on the basis of limited sensor information in an office. As shown in Fig. 3 (a), a gaseous contaminant was released at the head level of an occupant; the corresponding temporal release rate is represented by the black line in Fig. 3 (c). The gas concentration ( Fig. 3 (b)), as monitored by a sensor located at the outlet, was used as input for the inverse simulation. As shown in Fig. 3 (c), the temporal release rate identified by the method (in the red line) agrees well with the actual rate.\n\nIn summary, backward methods are applicable for solving the reversed scalar transport equations and work well in inverse identification of a contaminant source. The primary limitation of the backward methods is that they only provide an approximate solution and require a known flow field. The inverse design of an enclosed environment usually requires inverse prediction of the flow field, in which case backward methods are not applicable or need further development. The computing costs for the backward methods are similar to typical CFD simulations plus a continued simulation of species dispersion. Therefore, the backward methods are affordable for most indoor environment studies.\n\nThis section discusses the forward methods based on the NS equations with CFD simulation techniques for inverse design. These methods have more extensive applications than the backward methods. Forward methods can be further classified primarily as the CFD-based adjoint method, the CFD-based genetic algorithm method, and the POD analysis method. The first two methods integrate CFD with an optimization algorithm, and the last method uses a reduced-order model to lower computing costs for CFD simulations. Forward methods convert an inverse design problem to a control problem by constructing an objective function. Various objective functions can be constructed for a design objective. For example, if the design objective is to reach a good thermal comfort in an occupied space, the objective function, O, can be constructed using the predicted mean vote (PMV) value that is function of air velocity, temperature, and relative humidity distributions in the occupied zone, such as:\n\nwhere x is a vector that represents the design variables (e.g., supply air velocity and temperature) and U is the occupied zone volume. Inverse design identifies the optimal x that minimizes O(x) (i.e., neutral thermal condition). The design approach varies with the used forward method. \n\nThe adjoint method computes the derivative of the objective function (Eq. (5)) over the design variables, x, so that the method can search the direction for gradually minimizing the objective function. Because of the strong nonlinearity in the NS equations, the derivative dO/dx cannot be straightforwardly computed. The adjoint method introduces a Lagrange multiplier with p a as adjoint pressure, U a as adjoint velocity, T a as adjoint temperature, and j a as adjoint scalar. The Lagrange multiplier can transform the constrained control problem into an unconstrained control problem. The augmented objective function can be reformulated as:\n\nwhere Q represents the flow domain and N \u00bc (N 1 , N 2 , N 3 , N 4 , N 5 , N 6 ) T represents the NS equations in vector form (N 1 the continuity equation; N 2 , N 3 , and N 4 the momentum equations; N 5 the energy equation; and N 6 the scalar transport equation). One can refer to Othmer et al. [34] for the final form of the adjoint equations. To minimize the objective function on the design variables requires solving the following equation by gradually adjusting design variable x:\n\nThe adjoint method can be very efficient in finding an optimal solution, although the method may identify the local optima.\n\nThe adjoint method has been used in various fields since it was first introduced by Lions [35] for systems governed by partial differential equations. Pironneau [36] was the first to use the adjoint method for design in fluid dynamics. Jameson [37, 38] applied the adjoint method in aerodynamic design with the aim to find the geometry that would minimize drag. Jameson [39] and Reuther et al. [40, 41] developed the adjoint approach for the airfoil optimization, wing design, and complete aircraft configurations. A number of other research groups have developed various adjoint CFD codes for design optimization [42e44]. The method is successfully applied in heat transfer problems, shape optimization, and pollution source identification.\n\nFor the inverse reconstruction and design problem in an enclosed environment, Liu and Zhai [45, 46] developed the adjoint method to locate an instantaneous or dynamical indoor contaminant source. Liu and Chen [47] established a CFD-based adjoint method for the optimal design of indoor airflow with thermo-fluid boundary conditions as the design variables and flow and/or temperature fields as the design objective. This study found that different initial inlet air conditions led to different optimal inlet air conditions, which implies the existence of multiple solutions. Later, Liu et al. [48] included the air supply location and size as design variables. In a two-dimensional non-isothermal ventilated cavity case [49] as shown in Fig. 4(a) , matching the simulation results with measured air velocity and temperature on the red dashed lines were used as the design objective. Fig. 4(b) and (c) show, respectively, the computed flow field with the initially guessed and the finally identified air supply location, size, and parameters. The design procedure required only 16 adjustments of the design variables, automatically performed during a single computation. The inlet location was inversely identified with reasonable accuracy for the targeted air velocity and temperature profiles at the two sections. The study also found that the computing costs did not vary with the number of design variables.\n\nAs another optimization approach, the genetic algorithm (GA) was first introduced by Holland [19] in the 1970s. GA is a gradientfree optimization method that simulates natural evolution in the search of optimal solutions. In order to perform evolution operations on design variables, GA must encode design variables into a string, which is called an individual. A collection of individuals constitutes a population. GA optimizes the solution with evolution (or iteration) of the population. A fitness value (the value of the objective function) quantifies the \"goodness\" of an individual. According to the number of objective functions, GA can be classified as a single-objective genetic algorithm (SOGA) or a multi-objective genetic algorithm (MOGA) [50] .\n\nA number of studies have improved the genetic algorithm method. For instance, Grefenstette [51] succeeded in increasing the efficiency of a genetic algorithm by adjusting its parameters with another genetic algorithm. Horn et al. [52] developed the tournament selection technique for the selection process, which increased the distinguishability of the algorithm. Srinivas and Patnaik [53] developed the adaptive genetic algorithm, in which the probabilities of crossover and mutation can be varied depending on the fitness values of the solutions. This new method can converge to the global optimum in far fewer generations with lesser likelihood Fig. 3 . Demonstration of the regularized inversed matrix method in a release of a tracer gas in an office room to simulate a contaminant from human respiration: (a) threedimensional layout of the room, (b) monitored tracer gas concentration at the outlet, and (c) inversely identified temporal release rate compared with the actual release rate [33] .\n\nof falling into local optima. Genetic algorithms inherently tend to produce a set of proper solutions, and Karr et al. [54] recognized this potential in their development of regression correlations and applied genetic algorithms using least-squares curve-fitting techniques. Researchers have also attempted to increase the convergence speed without reducing the capability of a genetic algorithm in searching optimal global multi-solutions for multiple objectives. On the basis of the vector-evaluated genetic algorithm proposed by Schaffer [50] , other groups have made the genetic algorithm more capable of multi-objective optimization [55e57].\n\nGenetic algorithms have been used in various industrial and engineering applications, such as machine learning [58] , urban planning [59] , chemical kinetics reaction mechanisms [60e62], and pollutant source identification in groundwater [63, 64] . In application to buildings, Huang and Lam [65] used the genetic algorithm for automatic tuning of controllers in HVAC systems, and Wright et al. [66] identified pay-off characteristics between the building energy cost and the occupant thermal discomfort. Nassif et al. [67] minimized energy use and maximized comfort in multiple zones with high loads. Fong et al. [68] set suitable operating parameters for an HVAC system without sacrificing thermal comfort, and Ma and Wang [69] developed a supervisor and optimal control strategy for energy efficiency.\n\nThe application of genetic algorithms in heat transfer and fluid flow started in the 1990s, such as the work by Queipo et al. [70] . This is probably due to the relatively long computational time in these applications. Other applications include heat exchange performance [71e73], airfoil design [74, 75] , car shape design [76] , airflow field optimization of a melt blowing slot die [77] , and geometric optimization of a gas turbine transition piece [78] .\n\nMalkawi et al. [79] were probably the first to combine CFD with a genetic algorithm for indoor environmental design. Kato and Lee [80] applied a similar approach to optimizing a hybrid airconditioning system with natural ventilation. Xue et al. [81] implemented the inverse prediction and optimization of flow control conditions for confined spaces. Further, Zhai et al. [82] optimized flow control conditions for a confined space (Fig. 5(a) ) by satisfying multiple design indices, such as PMV, percentage dissatisfied with the draft (PD), and mean age of air. If the design objective is to have PMV \u00bc 0, PD < 15%, and mean age of air less than 125 s on the design domain represented by the circles in Fig. 5(a) , then all points on the curve of PMV \u00bc 0 shown in Fig. 5 (b) satisfy the first condition. The PMV \u00bc 0 and PD \u00bc 15% curves intersecting at point Q2 meet the second condition with a supply air velocity of 1.75 m/s and air temperature of 24.2 C. The curve of the mean age of air at 125 s intersecting with the curve of PMV \u00bc 0 at Q1 satisfies the third condition with a supply air velocity of 1.11 m/s and air temperature of 22.69 C. As a result, any design along the red line between Q1 and Q2 would meet the design objectives. Since the indoor environment design is a multivariable, multi-solution, multi-objective problem, the genetic algorithm can identify the global optima. Nevertheless, the CFDbased genetic algorithm method requires many CFD simulations during the population evolution, and the computational effort increases by orders of magnitude with an increase in the number of the design variables. An optimal design of an indoor environment using GA can take a week or more to reach the final solutions, depending on the case sophistication and accuracy requirements.\n\nAn option for reducing the CFD simulation effort is to apply the proper orthogonal decomposition (POD) method [20] . The POD method provides a quick approach to describing forward mapping of a thermo-fluid distribution from various boundary setting conditions. POD establishes a basis for the modal decomposition of an ensemble of data, such as thermo-flow fields obtained from CFD simulations or measurements. A thermo-flow field can be expressed as a combination of the orthogonal spatial modes with their amplitudes or coefficients [83] , as follows:\n\nwhere F c is the constructed field, c k is the amplitude or coefficient of the spatial mode 4 k , k is the index of the spatial mode, and K is the number of required spatial modes.\n\nTo reduce the effort required to solve for the spatial modes, Sirovich [84] proposed the snapshot method for extracting the spatial modes as samples. Generally, the number of snapshots is far less than the number of spatial grid points, so considerable computing expense can be saved. The spatial mode is calculated as a combination of each snapshot field with its coefficient as:\n\nwhere a s is the coefficient of a snapshot field F s , and S is the number of snapshots. Once the coefficients of the spatial modes are provided, a field can be constructed on the basis of Eq. (8) . According to the orthogonality principles, the coefficient of a spatial mode corresponding to a snapshot field is:\n\nThe coefficients of the POD modes can correspond to a number of causal variables, for example, the air-supply parameters. By interpolating the coefficients for the rest air-supply parameters that are not used to extract the POD modes, the rest thermo-flow distribution can be instantly constructed.\n\nThe POD analysis was first proposed by Lumley [20] nearly a half-century ago to analyze the structure of inhomogeneous turbulent flows. Later, this technique became popular in both experimental and numerical fluid mechanics. Citriniti and George [85] utilized the POD method to analyze the measurement data provided by a hotwire anemometry in a turbulent shear layer. Lam [86] used POD to construct the measured velocity and concentration distributions of a round jet. Early applications of the method for numerical fluid dynamics were for near-wall and jet-induced mixing flows [87e89]. Later, POD was applied to predict some basic fluid flows and heat transfer. For example, Cazemier et al. [90] used POD to construct a low-dimensional model for cavity-driven flows, in which 80 spatial modes were extracted from 700 snapshots. Couplet et al. [91] proposed a calibrated reduced-order POD-Galerkin model to predict the flows around a square cylinder and past a backward-facing step, respectively. Ding et al. [92] proposed the POD-based data interpolation strategy to predict the thermoflow fields for natural convection and forced convection flows. Liberge and Hamdouni [93] investigated the dynamic flow induced by a rigid oscillating cylinder. The POD-based adaptive controller was also developed for real-time dynamic flow adjustment and prediction [94, 95] .\n\nFor enclosed environments, POD is mainly used for fast prediction of indoor thermo-flow and pollutant concentration, optimization of air-supply parameters, development of controllers for dynamic ventilation control, etc. Elhadidi and Khalifa [96] applied the POD analysis to efficiently predict the velocity and temperature distributions inside an empty office. Sempey et al. [97] performed a POD-based prediction of temperature distribution in airconditioned rooms in a fixed-flow context. Allery et al. [98] tracked particle motion in a two-dimensional ventilated cavity where the inside airflow was provided by a POD construction. Li et al. [99] integrated a genetic algorithm into the POD prediction of thermo-fluid flow to efficiently optimize the air-supply velocity and temperature. Ahuja et al. [100] developed POD-based controllers to eliminate heat disturbance of an indoor environment by solar radiation, occupants, lights, etc. Tallet et al. [101] used the POD analysis to predict fluid flow and dynamically control the opening of a window in a two-dimensional ventilated cavity. Li et al. [102] proposed a POD-based temperature prediction model for dynamic control of room temperature.\n\nWang et al. [103] developed a POD-based inverse design method to determine appropriate air-supply parameters in an enclosed environment. With a quick cause-effect mapping of the indoor environmental performance from boundary settings, the air-supply parameters that meet the design targets are identified. Fig. 6(a) shows a three-dimensional half cabin section in which the airsupply velocity and temperature for one slot opening were inversely determined. Fig. 6(b) shows the results for the left airsupply opening S 1 that meet the design objective of jPMVj<0.5 in the head (brown) region in Fig. 6(a) . The supply air velocity and temperature in the green dot area of Fig. 6 (b) can lead to satisfactory PMV in the head region. A full CFD simulation took approximately 8 h to solve a single case when providing the snapshot fields, while the POD required less than 2 s to construct a new case. This study used 40 CFD simulations to construct 2871 POD interpolations. The total computing time was 321 h, most of which was for the CFD simulations. If full CFD simulations were conducted, the computing time for 2871 CFD simulations would be 23,000 h. Thus, the POD method is very efficient.\n\nThe computing costs of the forward simulations are generally much higher than those of the backward simulations. This is because tens or even hundreds of forwarded CFD simulations are needed. The adjoint method uses the same computing time regardless the number of the parameters solved, while the GA method is very sensitive to the number of the parameters. The GA method is thus more computational demanding for a complex problem. The POD method is far less expensive because it uses interpolation. However, the accuracy is not as good as the other two methods discussed here.\n\nAn inverse design can be carried out based on either the backward method or the forward method. Either method has its cons and pros. The backward method reverses the governing causeeeffect relationship to find the causes and thus the reversion is straightforward. Since the reversed causeeeffect relationship is ill posed, a regularization technique by adding extra terms to stabilize the inverse solution is required. However, the regularization destroys the original causeeeffect relationship and consequently only an approximate solution can be provided. The accuracy of the backward method varies with the problem and the strength of the added regularized operation. There is no iterative computation required except in some circumstances when searching for an optimal regularized parameter is necessary. Hence, the backward method can provide results more efficiently than the forward method. However, the current backward method is limited to identification of a species source as shown in this paper or thermal boundary conditions without involving flow.\n\nFor indoor environment studies, the backward methods are useful in many applications. For example, one could use the methods to track an infectious disease source in a hospital. Security authority can use the methods to locate the sensor locations for detecting chemical/biological warfare agents. The methods can also be used for comfort studies. For instance, the methods can identify where to place a radiant panel in a large workshop to keep a small work zone warm in winter.\n\nThe inverse design based on the forward method does not handle the inversion directly but turns into the forward causeeeffect relationship to find the design variables that satisfy the objectives. Thus, this is an optimization approach. The solved governing equations are forward and well-posed, which has a solution and the solution is normally stable. Since a certain boundary condition would lead to one forward solution, an inverse design requires many trials with different boundary settings. An optimization technique like the adjoint method and genetic algorithm can be utilized to accelerate the search for a desired solution. The adjoint method is a gradientbased optimization, which may trap in a local optimum if no external interruption is imposed. The genetic algorithm searches for an optimal solution globally but at the expense of many solution trials, so it is computationally intensive based on CFD. The POD method presented in this paper does not utilize an optimization method. The POD provides a very quick cause-effect mapping based on the extracted spatial modes and interpolation of their coefficients. However, if the data used does not contain the characteristics of the desirable solution, the method would not be able to provide desirable design. In addition, the interpolation is not free from errors.\n\nThe forward methods have great potential for indoor environment design. For example, in a completely new setting where no experience is available, the methods can provide an ideal solution. For example, should one wish to design a uniform flow around a human body with personalized ventilation, the existing design method would require hundreds of trials. The forward methods in theory have the ability to find the air supply locations and parameters to achieve the flow in one single computation. The beauty of the forward methods is stable and solvable. The major problem of the forward methods is computationally demanding so that the methods have yet widely applied to design complex systems. However, the methods have great potential in the near future.\n\nTo increase efficiency, one option is to use fast fluid dynamics (FFD) [104] as a substitute for CFD. FFD solves NS equation by using a three-step, time-advancement scheme [105] that splits the momentum equation into three discretized equations. FFD first solves the advection term by a semi-Lagrangian approach [106] and then solve the source and diffusion term with an implicit scheme. Finally, FFD solves the pressure term and continuity equation together by using a pressure-projection method. By combining the solution of the three discretized equations, the method could get a final answer for the NS equation. The algorithm that does not require iteration so the computing speed is fast. It was initiated for computer game industry that seeks speed rather than accuracy. After further development by our team, FFD is also rather accurate now [107e114]. According to Zuo and Chen [104] , FFD can be 50 times faster than CFD and can predict the flow field with acceptable accuracy. Another option is to replace the CFD simulation with an artificial neural network. Zhou and Haghighat [115] combined a genetic algorithm and artificial neural network to optimize ventilation systems in office spaces. Boithias et al. [116] also proposed a genetic-algorithm-based method to optimize the architecture, training parameters, and inputs of an artificial neural network for predicting energy use and indoor discomfort during building control optimization. However, the use of an artificial neural network instead of CFD would increase the uncertainty and the risk of accumulative error [117] . To solve this problem, Zhang and You [118] used both an artificial neural network and CFD to obtain the design objectives of new individuals. This integrated method could ensure accuracy in calculating the design objectives and reduce computational costs by 65%.\n\nAnother approach to reducing the computational effort of the CFD-based genetic algorithm method is to take advantage of the combined genetic algorithm and adjoint method. Giannakoglou et al. [119] developed the combined genetic method for the optimal design of aerodynamic shapes. The genetic algorithm was used for the initial design, and the adjoint method was applied for fine tuning, leading to faster convergence. The integrated CFD-based GA and adjoint method can be much faster than the pure CFD-based GA. In addition, the integrated method can find the global optima, thus overcoming the shortcomings of the pure CFD-based adjoint method. Xue et al. [120] combined the genetic algorithm with the adjoint method and revealed that this new integrated method is at great advantage when the number of variables for optimization is large.\n\nA combination of the backward methods with the forward methods can be a further direction for future research. The backward methods can provide an approximate inverse solution efficiently. Hence, the inverse solution from the backward methods may be input into the forward methods as the initial guess of the final solution. Then the forward methods are employed to further improve the solution accuracy. The above strategy may shorten the time spent in circumscribing the rough ranges of design variables that satisfy the design targets. Such a scenario is viable at least for inverse identification of species sources. For example, Zhang et al. [121] backwardly determined the pollutant source release rates at all possible source locations first and then identified the correct source in a forward matching process.\n\nThis investigation set only global objectives over the domain as the design target. However, the trends of modern enclosed environments are towards to personalized customization, especially in high-density public building or transportation vehicle compartments, where internal flow and thermal boundary condition design should be paid with great attention. In principle, the methods presented in this paper can be extended to account for each individual's demanding objectives. The traditional general ventilation and boundary condition control may not fulfill the task. The designers may have to turn to personal environmental control. An inverse design that can take into account each individual's demanding objectives and its combination with a personal environmental control is a good topic for future study. The inverse design can demonstrate evidently its advantage in such a case.\n\nThis paper critically reviewed the state-of-the-art methods for inverse design of an enclosed environment and demonstrated the application of these methods through several examples. Both the backward and forward methods were criticized. The advantages and disadvantages of each method were analyzed in terms of applicability, computing efficiency, and accuracy. The study has led to the following primary conclusions:\n\nBackward methods are useful for identifying contaminant sources and inverse design of thermal boundary conditions, but not for entire flow field design. The current backward methods can only handle an inverse design in known flow context.\n\nForward methods are promising for inverse design of enclosed environments. The CFD-based adjoint method may only identify the local optima of the design objective, but the computing effort remains the same regardless of the number of the design variables. The CFD-based genetic algorithm method can find the global optima of the design objective, however the computing effort is significantly large. The POD method can reduce the computing effort, although the resulting accuracy can be poor.\n\nSeveral recommendations are provided to increase the modeling and modeling efficiency for CFD-based methods, such as using fast fluid dynamics techniques. A combination of two or more methods may also reduce the computing effort without compromising prediction accuracy. "}